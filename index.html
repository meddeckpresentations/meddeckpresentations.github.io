<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MedDeck — Support & Docs</title>
  <meta name="description" content="MedDeck — support, documentation, and contact for MedDeck users." />
  <meta name="app-icon" content="">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <meta property="og:title" content="MedDeck — Support & Docs" />
  <meta property="og:description" content="Support resources and contact for MedDeck users." />
</head>
<body>
  <header class="site-header">
    <div class="container header-grid">
      <a class="brand" href="/">
        <div class="logo-wrap" aria-hidden="true">
          <img id="app-icon" alt="MedDeck logo" src="" />
        </div>
        <span class="brand-name">MedDeck</span>
      </a>

      <nav class="nav" id="primary-nav">
        <a href="#features">Features</a>
        <a href="#support">Support</a>
        <a class="btn btn-ghost" href="#contact">Contact</a>
      </nav>

      <button class="nav-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="hamburger"></span>
      </button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-grid">
        <div class="hero-copy">
          <h1>Beautiful clinical slide decks, faster.</h1>
          <p class="lead">MedDeck helps clinicians and educators create, share, and present medical slide decks with templates, data charts, and secure sharing.</p>
          <p class="cta-row">
            <a id="cta" class="btn btn-primary" href="mailto:meddeckpresentations@gmail.com?subject=MedDeck%20Support">Email support</a>
            </p>
          <ul class="trust">
            <li><strong>Fast templates</strong></li>
            <li><strong>Export PPTX & PDF</strong></li>
            <li><strong>Secure sharing</strong></li>
          </ul>
        </div>

        <div class="hero-media">
          <div class="device">
            <img alt="MedDeck preview screenshot placeholder" src="https://raw.githubusercontent.com/alionpax/meddeck/checkpoint/stable-viewer/assets/preview.png" onerror="this.style.display='none'">
            <div class="device-fallback">
              <svg viewBox="0 0 800 520" preserveAspectRatio="xMidYMid meet" role="img" aria-hidden="true">
                <rect x="0" y="0" width="800" height="520" rx="12" fill="var(--accent)" />
                <rect x="28" y="28" width="744" height="464" rx="8" fill="var(--bg-end)" />
                <rect x="48" y="60" width="656" height="18" rx="6" fill="var(--accent-2)" />
                <rect x="48" y="90" width="320" height="220" rx="6" fill="#fff" />
                <rect x="384" y="90" width="320" height="220" rx="6" fill="#fff" />
                <rect x="48" y="330" width="656" height="120" rx="6" fill="var(--accent-2)" />
              </svg>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="features" class="container features">
      <h2>Design-first features</h2>
      <p class="lede">Everything clinicians need to create great presentations.</p>
      <div class="feature-grid">
        <article>
          <h3>Clinically focused templates</h3>
          <p>Pre-built slide templates tailored to clinical teaching and case presentations.</p>
        </article>
        <article>
          <h3>Data-driven visuals</h3>
          <p>Import data and produce clear charts and tables designed for medical audiences.</p>
        </article>
        <article>
          <h3>Export & share</h3>
          <p>Export to PPTX/PDF and share with role-based permissions for compliance.</p>
        </article>
      </div>
    </section>

    <section id="support" class="container support">
      <h2>Support & FAQ</h2>
      <details>
        <summary>How do I run the app locally?</summary>
        <p>Install Flutter, then run <code>flutter run</code> in the project root. See the repo README for details.</p>
      </details>
      <details>
        <summary>How do I export slides?</summary>
        <p>Use the app's export options to save PPTX or PDF; reach out if you encounter issues.</p>
      </details>
    </section>

    <section id="contact" class="container contact">
      <h2>Contact</h2>
      <p>Send us a message — the form will open your email client with a prefilled subject and body.</p>
      <form class="contact-form" onsubmit="openMail(event)">
        <label>
          Name
          <input type="text" name="name" placeholder="Your name" required>
        </label>
        <label>
          Email
          <input type="email" name="email" placeholder="you@example.com" required>
        </label>
        <label>
          Message
          <textarea name="message" rows="4" placeholder="Tell us about your question" required></textarea>
        </label>
        <div class="form-actions">
          <button class="btn btn-primary" type="submit">Send message</button>
          <a class="btn btn-outline" href="mailto:meddeckpresentations@gmail.com">Or email us</a>
        </div>
      </form>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="brand-line">
        <span class="brand">MedDeck</span>
        <small>© <span id="year"></span> MedDeck</small>
      </div>
      <nav class="footer-nav">
        <a href="#">Privacy</a>
        <a href="#">Terms</a>
        <a href="https://github.com/alionpax/meddeck" target="_blank" rel="noopener">Source</a>
      </nav>
    </div>
  </footer>

  <script>
    // simple nav toggle
    const btn = document.querySelector('.nav-toggle');
    const nav = document.getElementById('primary-nav');
    if (btn) {
      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        nav.classList.toggle('open');
      });
    }

    // set year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mailto form
    function openMail(e){
      e.preventDefault();
      const form = e.target;
      const name = encodeURIComponent(form.name.value || '');
      const email = encodeURIComponent(form.email.value || '');
      const message = encodeURIComponent(form.message.value || '');
      const subject = encodeURIComponent('MedDeck Support Request');
      const body = encodeURIComponent(`Name: ${decodeURIComponent(name)}\nEmail: ${decodeURIComponent(email)}\n\n${decodeURIComponent(message)}`);
      window.location.href = `mailto:meddeckpresentations@gmail.com?subject=${subject}&body=${body}`;
    }

    // Color extraction from app icon
    (function(){
      const metaIcon = document.querySelector('meta[name="app-icon"]');
      const defaultIcon = '';
      const appIcon = document.getElementById('app-icon');

      // colorful SVG fallback as data URL
      const fallbackSVG = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><defs><linearGradient id="g" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="%23ff7a18"/><stop offset="0.5" stop-color="%23af4261"/><stop offset="1" stop-color="%233a86ff"/></linearGradient></defs><rect width="512" height="512" rx="90" fill="url(%23g)"/><text x="50%" y="58%" text-anchor="middle" font-family="Inter,Arial" font-size="240" fill="%23ffffff" font-weight="700">MD</text></svg>';

      const iconUrl = (metaIcon && metaIcon.content) ? metaIcon.content.trim() : defaultIcon;
      appIcon.src = iconUrl || fallbackSVG;
      appIcon.onerror = () => { appIcon.src = fallbackSVG; };

      function extractColors(img, cb){
        try {
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          const size = 48;
          canvas.width = size; canvas.height = size;
          ctx.clearRect(0,0,size,size);
          ctx.drawImage(img, 0, 0, size, size);
          const imgData = ctx.getImageData(0,0,size,size).data;
          const counts = {}; let maxCount = 0; let best = [15,23,42];
          for (let i = 0; i < imgData.length; i += 4) {
            const r = imgData[i], g = imgData[i+1], b = imgData[i+2], a = imgData[i+3];
            if (a < 125) continue;
            const key = ((r>>4)&0xF) + ',' + ((g>>4)&0xF) + ',' + ((b>>4)&0xF);
            counts[key] = (counts[key] || 0) + 1;
            if (counts[key] > maxCount) maxCount = counts[key];
          }
          for (const k in counts) {
            if (counts[k] === maxCount) { const parts = k.split(',').map(n => parseInt(n,10) << 4); best = parts; break; }
          }
          cb && cb(best);
        } catch (err){ cb && cb([15,23,42]); }
      }

      function applyPalette([r,g,b]){
        const accent = `rgb(${r},${g},${b})`;
        const light = (c, amt) => Math.round(c + (255 - c) * amt);
        const accent2 = `rgb(${light(r,0.35)},${light(g,0.35)},${light(b,0.35)})`;
        const bgStart = `rgb(${light(r,0.88)},${light(g,0.88)},${light(b,0.88)})`;
        const bgEnd = '#ffffff';
        const luminance = 0.299*r + 0.587*g + 0.114*b;
        const onAccent = (luminance > 150) ? '#0f172a' : '#ffffff';
        document.documentElement.style.setProperty('--accent', accent);
        document.documentElement.style.setProperty('--accent-2', accent2);
        document.documentElement.style.setProperty('--bg-start', bgStart);
        document.documentElement.style.setProperty('--bg-end', bgEnd);
        document.documentElement.style.setProperty('--on-accent', onAccent);
      }

      if (appIcon.complete) {
        extractColors(appIcon, applyPalette);
      } else {
        appIcon.addEventListener('load', () => { extractColors(appIcon, applyPalette); });
      }
    })();
  </script>
</body>
</html>

